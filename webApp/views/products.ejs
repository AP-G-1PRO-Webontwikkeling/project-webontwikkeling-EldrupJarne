<%- include("partials/header") %>
    <section>
        <form action="/products?filter=<%= filter %>&sortParam=<%= sortParam %>&direction=<%= direction %>" method="GET">
            <div class=" container form-control d-flex">
                <button type="submit" class="bg-white text-dark border-0"><i class="bi bi-search form"></i></button>
                <input class="form-control border-0" type="search" name="filter" id="filter" value="<%= filter %>">
            </div>
        </form>
    </section>
    <section class="bg-dark p-3 rounded table-responsive">
        <table class="table table-dark table-striped table-hover align-middle rounded text-center">
            <caption class="text-light">List of products</caption>
            <thead>
                <tr>
                    <th scope="col" colspan="2"><a href="/products?filter=<%= filter %>&sortParam=articleName&direction=<%= direction %>" class="text-white text-decoration-none text-nowrap">Article <% if (sortParam=="articleName" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                    <th scope="col"><a href="/products?filter=<%= filter %>&sortParam=brand&direction=<%= direction %>" class="text-white text-decoration-none text-nowrap">Brand <% if (sortParam=="brand" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                    <th scope="col"><a href="/products?filter=<%= filter %>&sortParam=price&direction=<%= direction %>" class="text-white text-decoration-none text-nowrap">Price <% if (sortParam=="price" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                    <th scope="col"><a href="/products?filter=<%= filter %>&sortParam=lastSold&direction=<%= direction %>" class="text-white text-decoration-none text-nowrap">Last Sold <% if (sortParam=="lastSold" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                    <th scope="col"><a href="/products?filter=<%= filter %>&sortParam=type&direction=<%= direction %>" class="text-white text-decoration-none text-nowrap">Product Type <% if (sortParam=="type" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                    <th scope="col"><a href="/products?filter=<%= filter %>&sortParam=inStock&direction=<%= direction %>" class="text-white text-decoration-none text-nowrap">In Stock <% if (sortParam=="inStock" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                </tr>
            </thead>
            <tbody class="table-group-devider">
                <% for (const product of products) { %>
                    <tr scope="row">
                        <td class="d-flex gap-2 justify-content-center">
                            <img width="60px" src="<%= product.imageSrc %>" alt="<%= product.articleName %>">

                        </td>
                        <td>
                            <p>
                                <%= product.articleName %>
                            </p>
                        </td>
                        <td>
                            <%= product.brand %>
                        </td>
                        <td>
                            $<%= product.price %>
                        </td>
                        <td>
                            <%= product.lastSold %>
                        </td>
                        <td>
                            <%= product.type.typeName %>
                        </td>
                        <td>
                            <% if (product.inStock) { %>
                                <i class="bi bi-circle-fill text-success"></i>
                                <% } else {%>
                                    <i class="bi bi-circle-fill text-danger"></i>
                                    <% } %>
                        </td>
                    </tr>
                    <% } %>
            </tbody>
        </table>
    </section>
    <%- include("partials/footer") %>