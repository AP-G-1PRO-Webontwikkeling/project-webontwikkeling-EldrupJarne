<%- include("partials/header") %>
    <section class="pb-5">
        <form action="/products?filter=<%= filter %>&sortParam=<%= sortParam %>&direction=<%= direction %>" method="GET">
            <label class="form-label" for="filter">Search for items</label>
            <div class=" container form-control d-flex">
                <input class="form-control border-0 me-1" type="search" name="filter" id="filter" value="<%= filter %>" placeholder="...">
                <button type="submit" class="bg-white text-dark border-0"><i class="bi bi-search form"></i></button>
            </div>
        </form>
    </section>
    <section class="bg-dark p-3 rounded table-responsive text-nowrap">
        <table class="table table-dark table-striped table-hover align-middle rounded text-start">
            <caption class="text-light">List of products</caption>
            <thead>
                <tr>
                    <th scope="col" colspan="2"><a href="/products?filter=<%= filter %>&sortParam=articleName&direction=<%= direction %>" class="text-white text-decoration-none ">Article <% if (sortParam=="articleName" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %></a></th>
                    <th scope="col"><a href="/products?filter=<%= filter %>&sortParam=brand&direction=<%= direction %>" class="text-white text-decoration-none ">Brand <% if (sortParam=="brand" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                    <th scope="col"><a href="/products?filter=<%= filter %>&sortParam=price&direction=<%= direction %>" class="text-white text-decoration-none ">Price <% if (sortParam=="price" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                    <th scope="col"><a href="/products?filter=<%= filter %>&sortParam=lastSold&direction=<%= direction %>" class="text-white text-decoration-none ">Last Sold <% if (sortParam=="lastSold" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                    <th scope="col"><a href="/products?filter=<%= filter %>&sortParam=type&direction=<%= direction %>" class="text-white text-decoration-none ">Product Type <% if (sortParam=="type" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                    <th scope="col"><a href="/products?filter=<%= filter %>&sortParam=inStock&direction=<%= direction %>" class="text-white text-decoration-none">In Stock <% if (sortParam=="inStock" ) {%>
                                <% if (direction=="1" ) { %>
                                    <i class="bi bi-caret-up-fill"></i>
                                    <% } else if (direction=="2" ){%>
                                        <i class="bi-caret-down-fill"></i>
                                        <% } %>
                                            <% } %> </a></th>
                </tr>
            </thead>
            <tbody class="table-group-devider">
                <% for (const product of products) { %>
                    <tr scope="row">
                        <td class="d-flex gap-2 justify-content-center">
                            <img width="60px" src="<%= product.imageSrc %>" alt="<%= product.articleName %>">

                        </td>
                        <td>
                            <a class="text-white text-decoration-none" href="/products/<%= product.articleName %>">
                                <%= product.articleName %> <i class="bi bi-box-arrow-up-right ms-1"></i>
                            </a>
                        </td>
                        <td>
                            <%= product.brand %>
                        </td>
                        <td>
                            $<%= product.price %>
                        </td>
                        <td>
                            <%= product.lastSold %>
                        </td>
                        <td>
                            <a class="text-white text-decoration-none" href="/types/<%= product.type.typeName %>">
                                <%= product.type.typeName %> <i class="bi bi-box-arrow-up-right ms-1"></i>
                            </a>
                        </td>
                        <td class="text-center">
                            <% if (product.inStock) { %>
                                <i class="bi bi-circle-fill text-success"></i>
                                <% } else {%>
                                    <i class="bi bi-circle-fill text-danger"></i>
                                    <% } %>
                        </td>
                    </tr>
                    <% } %>
            </tbody>
        </table>
    </section>
    <%- include("partials/footer") %>